import{a as x,b as V}from"./chunk-CHDIVYYH.js";import{Hb as y,Ib as A,Jb as I,Ka as b,Kb as G,Lb as F,Ma as s,Mb as D,Nb as L,Oa as m,Ob as R,Ra as o,Sa as t,Ua as g,Va as f,Wa as E,Xa as p,Ya as l,Z as h,bb as n,cb as M,db as C,eb as k,fa as u,ga as P,jb as T,kb as O,lb as w,mb as N,va as r,wa as S}from"./chunk-DHL7B2SE.js";function z(d,_){d&1&&(o(0,"div",6)(1,"p"),n(2,"No hay pedidos con el filtro seleccionado."),t()())}function B(d,_){if(d&1&&(o(0,"li"),n(1),t()),d&2){let e=_.$implicit;r(),k(" ",e.cantidad," x ",e.nombre," ")}}function H(d,_){if(d&1&&(o(0,"p")(1,"strong"),n(2,"Observaciones:"),t(),n(3),t()),d&2){let e=l().$implicit;r(3),C(" ",e.observaciones,"")}}function j(d,_){if(d&1){let e=E();g(0),o(1,"button",19),p("click",function(){u(e);let i=l().$implicit,a=l();return P(a.changeStatus(i,"EN_PREPARACION"))}),n(2,"Aceptar"),t(),o(3,"button",20),p("click",function(){u(e);let i=l().$implicit,a=l();return P(a.changeStatus(i,"CANCELADO"))}),n(4,"Cancelar"),t(),f()}}function Y(d,_){if(d&1){let e=E();g(0),o(1,"button",21),p("click",function(){u(e);let i=l().$implicit,a=l();return P(a.changeStatus(i,"LISTO"))}),n(2,"Listo para Entregar"),t(),o(3,"button",20),p("click",function(){u(e);let i=l().$implicit,a=l();return P(a.changeStatus(i,"CANCELADO"))}),n(4,"Cancelar"),t(),f()}}function q(d,_){if(d&1){let e=E();g(0),o(1,"button",22),p("click",function(){u(e);let i=l().$implicit,a=l();return P(a.changeStatus(i,"ENTREGADO"))}),n(2,"Marcar como Entregado"),t(),f()}}function J(d,_){d&1&&(g(0),o(1,"p",23),n(2,"Este pedido ha sido entregado"),t(),f())}function K(d,_){d&1&&(g(0),o(1,"p",24),n(2,"Este pedido ha sido cancelado"),t(),f())}function Q(d,_){if(d&1&&(o(0,"div",7)(1,"div",8)(2,"span",9),n(3),t(),o(4,"span",10),n(5),t()(),o(6,"div",11)(7,"h4"),n(8,"Detalle del Pedido"),t(),o(9,"ul",12),b(10,B,2,2,"li",13),t(),o(11,"div",14)(12,"p")(13,"strong"),n(14,"Mesa:"),t(),n(15),t(),o(16,"p")(17,"strong"),n(18,"Cliente:"),t(),n(19),t(),o(20,"p")(21,"strong"),n(22,"Hora:"),t(),n(23),O(24,"date"),t(),o(25,"p")(26,"strong"),n(27,"Total:"),t(),n(28),O(29,"currency"),t(),b(30,H,4,1,"p",15),t()(),o(31,"div",16),g(32,17),b(33,j,5,0,"ng-container",18)(34,Y,5,0,"ng-container",18)(35,q,3,0,"ng-container",18)(36,J,3,0,"ng-container",18)(37,K,3,0,"ng-container",18),f(),t()()),d&2){let e=_.$implicit,c=l();s("ngClass",e.estado.toLowerCase()),r(3),C("Pedido #",(e.id==null?null:e.id.substring(0,8))||"Nuevo",""),r(2),M(c.getEstadoLabel(e.estado)),r(5),s("ngForOf",e.items),r(5),C(" ",e.mesa,""),r(4),C(" ",e.clienteNombre,""),r(4),C(" ",w(24,15,e.fechaCreacion,"HH:mm"),""),r(5),C(" ",N(29,18,e.total,"COP","symbol","1.0-0"),""),r(2),s("ngIf",e.observaciones),r(2),s("ngSwitch",e.estado),r(),s("ngSwitchCase","PENDIENTE"),r(),s("ngSwitchCase","EN_PREPARACION"),r(),s("ngSwitchCase","LISTO"),r(),s("ngSwitchCase","ENTREGADO"),r(),s("ngSwitchCase","CANCELADO")}}var te=(()=>{class d{constructor(e){this.pedidoService=e,this.allPedidos=[],this.filteredPedidos=[],this.selectedFilter="all"}ngOnInit(){this.loadPedidos()}loadPedidos(){this.pedidoService.getAllPedidos().subscribe({next:e=>{this.allPedidos=e,this.applyFilter(this.selectedFilter)},error:e=>{console.error("Error al cargar los pedidos",e)}})}filterPedidos(e){this.selectedFilter=e,this.applyFilter(e)}applyFilter(e){e==="all"?this.filteredPedidos=[...this.allPedidos]:this.filteredPedidos=this.allPedidos.filter(c=>c.estado===e),this.filteredPedidos.sort((c,i)=>{let a=c.fechaCreacion?new Date(c.fechaCreacion).getTime():0;return(i.fechaCreacion?new Date(i.fechaCreacion).getTime():0)-a})}changeStatus(e,c){let i=c;this.pedidoService.actualizarEstadoPedido(e.id,i).subscribe({next:a=>{let v=this.allPedidos.findIndex($=>$.id===e.id);v!==-1&&(this.allPedidos[v]=a),this.applyFilter(this.selectedFilter)},error:a=>{console.error("Error al actualizar el estado del pedido",a)}})}getEstadoLabel(e){return{[x.PENDIENTE]:"Pendiente",[x.EN_PREPARACION]:"En Preparaci\xF3n",[x.LISTO]:"Listo para Entregar",[x.ENTREGADO]:"Entregado",[x.CANCELADO]:"Cancelado"}[e]||"Desconocido"}static{this.\u0275fac=function(c){return new(c||d)(S(V))}}static{this.\u0275cmp=h({type:d,selectors:[["app-gestion-pedidos"]],standalone:!0,features:[T],decls:19,vars:14,consts:[[1,"container"],[1,"status-filters"],[1,"filter-btn",3,"click"],[1,"pedidos-grid"],["class","no-pedidos",4,"ngIf"],["class","pedido-card",3,"ngClass",4,"ngFor","ngForOf"],[1,"no-pedidos"],[1,"pedido-card",3,"ngClass"],[1,"pedido-header"],[1,"pedido-id"],[1,"pedido-status"],[1,"pedido-content"],[1,"pedido-items"],[4,"ngFor","ngForOf"],[1,"pedido-info"],[4,"ngIf"],[1,"pedido-actions"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"action-btn","accept",3,"click"],[1,"action-btn","cancel",3,"click"],[1,"action-btn","ready",3,"click"],[1,"action-btn","deliver",3,"click"],[1,"status-message","delivered"],[1,"status-message","cancelled"]],template:function(c,i){c&1&&(o(0,"div",0)(1,"h2"),n(2,"Gesti\xF3n de Pedidos"),t(),o(3,"div",1)(4,"button",2),p("click",function(){return i.filterPedidos("all")}),n(5,"Todos"),t(),o(6,"button",2),p("click",function(){return i.filterPedidos("PENDIENTE")}),n(7,"Pendientes"),t(),o(8,"button",2),p("click",function(){return i.filterPedidos("EN_PREPARACION")}),n(9,"En Preparaci\xF3n"),t(),o(10,"button",2),p("click",function(){return i.filterPedidos("LISTO")}),n(11,"Listos"),t(),o(12,"button",2),p("click",function(){return i.filterPedidos("ENTREGADO")}),n(13,"Entregados"),t(),o(14,"button",2),p("click",function(){return i.filterPedidos("CANCELADO")}),n(15,"Cancelados"),t()(),o(16,"div",3),b(17,z,3,0,"div",4)(18,Q,38,23,"div",5),t()()),c&2&&(r(4),m("active",i.selectedFilter==="all"),r(2),m("active",i.selectedFilter==="PENDIENTE"),r(2),m("active",i.selectedFilter==="EN_PREPARACION"),r(2),m("active",i.selectedFilter==="LISTO"),r(2),m("active",i.selectedFilter==="ENTREGADO"),r(2),m("active",i.selectedFilter==="CANCELADO"),r(3),s("ngIf",i.filteredPedidos.length===0),r(),s("ngForOf",i.filteredPedidos))},dependencies:[R,y,A,I,G,F,L,D],styles:[".container[_ngcontent-%COMP%]{padding:0;max-width:1200px;margin:0 auto}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{color:#ffcc29}h2[_ngcontent-%COMP%]{margin-bottom:30px}.status-filters[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:25px;flex-wrap:wrap}.filter-btn[_ngcontent-%COMP%]{padding:8px 16px;background:#333;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:all .3s ease}.filter-btn.active[_ngcontent-%COMP%], .filter-btn[_ngcontent-%COMP%]:hover{background:#ffcc29;color:#181818}.pedidos-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px}.pedido-card[_ngcontent-%COMP%]{background:#222;border-radius:8px;overflow:hidden;box-shadow:0 4px 12px #00000026;transition:transform .3s ease;border:2px solid #ffcc29}.pedido-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.pedido-card.pendiente[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.pedido-card.en-preparacion[_ngcontent-%COMP%]{border-left:4px solid #2196f3}.pedido-card.listo[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.pedido-card.entregado[_ngcontent-%COMP%]{border-left:4px solid #9e9e9e;opacity:.7}.pedido-card.cancelado[_ngcontent-%COMP%]{border-left:4px solid #f44336;opacity:.7}.pedido-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;background:#2a2a2a;border-bottom:1px solid #333}.pedido-id[_ngcontent-%COMP%]{font-weight:700;color:#fff}.pedido-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:.85rem;font-weight:500}.pedido-card.pendiente[_ngcontent-%COMP%]   .pedido-status[_ngcontent-%COMP%]{background:#ff9800;color:#000}.pedido-card.en-preparacion[_ngcontent-%COMP%]   .pedido-status[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.pedido-card.listo[_ngcontent-%COMP%]   .pedido-status[_ngcontent-%COMP%]{background:#4caf50;color:#000}.pedido-card.entregado[_ngcontent-%COMP%]   .pedido-status[_ngcontent-%COMP%]{background:#9e9e9e;color:#000}.pedido-card.cancelado[_ngcontent-%COMP%]   .pedido-status[_ngcontent-%COMP%]{background:#f44336;color:#fff}.pedido-content[_ngcontent-%COMP%]{padding:15px}.pedido-items[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 0 15px;color:#ddd}.pedido-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 0;border-bottom:1px dashed #333}.pedido-info[_ngcontent-%COMP%]{color:#bbb;font-size:.95rem}.pedido-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.pedido-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding:15px;background:#2a2a2a;border-top:1px solid #333}.action-btn[_ngcontent-%COMP%]{flex:1;padding:8px 0;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .3s ease}.action-btn.accept[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.action-btn.cancel[_ngcontent-%COMP%]{background:#f44336;color:#fff}.action-btn.ready[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.action-btn.deliver[_ngcontent-%COMP%]{background:#9c27b0;color:#fff}.action-btn[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px)}.no-pedidos[_ngcontent-%COMP%]{text-align:center;padding:20px;background:#222;border-radius:8px;border:2px solid #ffcc29;color:#888;grid-column:1 / -1}.status-message[_ngcontent-%COMP%]{text-align:center;padding:8px;border-radius:4px;width:100%}.status-message.delivered[_ngcontent-%COMP%]{background:#9e9e9e33;color:#9e9e9e}.status-message.cancelled[_ngcontent-%COMP%]{background:#f4433633;color:#f44336}@media (max-width: 768px){.pedidos-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return d})();export{te as GestionPedidosComponent};
