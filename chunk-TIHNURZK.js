import{a as V,b as A,c as F,d as T,e as G,f as I,g as D,h as W,i as j,j as N,k as z}from"./chunk-OD5VWANA.js";import{a as q}from"./chunk-PDQIPCUJ.js";import{Ib as O,Jb as E,Ka as x,Ma as _,Oa as C,Ob as k,Ra as t,Sa as n,Wa as M,Xa as p,Ya as s,Z as P,bb as r,cb as g,db as h,eb as y,fa as d,fb as f,ga as m,gb as b,hb as v,jb as w,va as a,wa as S}from"./chunk-DHL7B2SE.js";function L(l,u){if(l&1&&(t(0,"li")(1,"strong"),r(2),n(),r(3),n()),l&2){let e=u.$implicit;a(2),g(e.nombre),a(),y(" (",e.categoria,"): ",e.descripcion," ")}}function B(l,u){if(l&1){let e=M();t(0,"div",11)(1,"div",12)(2,"h4"),r(3),n(),t(4,"span",13),r(5),n()(),t(6,"p",14),r(7),n(),t(8,"div",15),r(9),n(),t(10,"div",16)(11,"h5"),r(12,"\xCDtems:"),n(),t(13,"ul"),x(14,L,4,3,"li",17),n()(),t(15,"div",18)(16,"button",19),p("click",function(){let i=d(e).$implicit,o=s(2);return m(o.editarMenu(i))}),t(17,"i",1),r(18,"edit"),n(),r(19," Editar "),n(),t(20,"button",20),p("click",function(){let i=d(e).$implicit,o=s(2);return m(o.desactivarMenu(i.id))}),t(21,"i",1),r(22,"delete"),n(),r(23," Desactivar "),n()()()}if(l&2){let e=u.$implicit;a(3),g(e.nombre),a(2),g(e.tipo),a(2),g(e.descripcion),a(2),h("Precio: $",e.precio.toLocaleString(),""),a(5),_("ngForOf",e.items)}}function Y(l,u){if(l&1&&(t(0,"div",8)(1,"h3"),r(2,"Men\xFAs Fijos"),n(),t(3,"div",9),x(4,B,24,5,"div",10),n()()),l&2){let e=s();a(4),_("ngForOf",e.menusFijos)}}function J(l,u){if(l&1&&(t(0,"li")(1,"strong"),r(2),n(),r(3),n()),l&2){let e=u.$implicit;a(2),g(e.nombre),a(),y(" (",e.categoria,"): ",e.descripcion," ")}}function R(l,u){if(l&1){let e=M();t(0,"div",11)(1,"div",12)(2,"h4"),r(3),n(),t(4,"span",13),r(5),n()(),t(6,"p",14),r(7),n(),t(8,"div",15),r(9),n(),t(10,"div",16)(11,"h5"),r(12,"\xCDtems:"),n(),t(13,"ul"),x(14,J,4,3,"li",17),n()(),t(15,"div",18)(16,"button",19),p("click",function(){let i=d(e).$implicit,o=s(2);return m(o.editarMenu(i))}),t(17,"i",1),r(18,"edit"),n(),r(19," Editar "),n(),t(20,"button",20),p("click",function(){let i=d(e).$implicit,o=s(2);return m(o.desactivarMenu(i.id))}),t(21,"i",1),r(22,"delete"),n(),r(23," Desactivar "),n()()()}if(l&2){let e=u.$implicit;a(3),g(e.nombre),a(2),g(e.tipo),a(2),g(e.descripcion),a(2),h("Precio: $",e.precio.toLocaleString(),""),a(5),_("ngForOf",e.items)}}function Q(l,u){if(l&1&&(t(0,"div",8)(1,"h3"),r(2,"Men\xFAs del D\xEDa"),n(),t(3,"div",9),x(4,R,24,5,"div",10),n()()),l&2){let e=s();a(4),_("ngForOf",e.menusDiarios)}}function H(l,u){if(l&1){let e=M();t(0,"div",44)(1,"div",26)(2,"label"),r(3,"Nombre:"),n(),t(4,"input",45),v("ngModelChange",function(i){let o=d(e).$implicit;return b(o.nombre,i)||(o.nombre=i),m(i)}),n()(),t(5,"div",26)(6,"label"),r(7,"Descripci\xF3n:"),n(),t(8,"input",46),v("ngModelChange",function(i){let o=d(e).$implicit;return b(o.descripcion,i)||(o.descripcion=i),m(i)}),n()(),t(9,"div",26)(10,"label"),r(11,"Categor\xEDa:"),n(),t(12,"select",47),v("ngModelChange",function(i){let o=d(e).$implicit;return b(o.categoria,i)||(o.categoria=i),m(i)}),t(13,"option",48),r(14,"Entrada"),n(),t(15,"option",49),r(16,"Plato Principal"),n(),t(17,"option",50),r(18,"Postre"),n()()(),t(19,"button",51),p("click",function(){let i=d(e).index,o=s(2);return m(o.eliminarItem(i))}),t(20,"i",1),r(21,"remove_circle"),n()()()}if(l&2){let e=u.$implicit;a(4),f("ngModel",e.nombre),a(4),f("ngModel",e.descripcion),a(4),f("ngModel",e.categoria)}}function K(l,u){if(l&1){let e=M();t(0,"div",21)(1,"div",22)(2,"div",23)(3,"h3"),r(4),n(),t(5,"button",24),p("click",function(){d(e);let i=s();return m(i.cerrarFormulario())}),t(6,"i",1),r(7,"close"),n()()(),t(8,"div",25)(9,"div",26)(10,"label",27),r(11,"Nombre:"),n(),t(12,"input",28),v("ngModelChange",function(i){d(e);let o=s();return b(o.menuActual.nombre,i)||(o.menuActual.nombre=i),m(i)}),n()(),t(13,"div",26)(14,"label",29),r(15,"Descripci\xF3n:"),n(),t(16,"textarea",30),v("ngModelChange",function(i){d(e);let o=s();return b(o.menuActual.descripcion,i)||(o.menuActual.descripcion=i),m(i)}),n()(),t(17,"div",26)(18,"label",31),r(19,"Tipo:"),n(),t(20,"select",32),v("ngModelChange",function(i){d(e);let o=s();return b(o.menuActual.tipo,i)||(o.menuActual.tipo=i),m(i)}),t(21,"option",33),r(22,"Diario"),n(),t(23,"option",34),r(24,"Ejecutivo"),n(),t(25,"option",35),r(26,"Especial"),n()()(),t(27,"div",26)(28,"label",36),r(29,"Precio:"),n(),t(30,"input",37),v("ngModelChange",function(i){d(e);let o=s();return b(o.menuActual.precio,i)||(o.menuActual.precio=i),m(i)}),n()(),t(31,"h4"),r(32,"\xCDtems del Men\xFA"),n(),t(33,"div",38),x(34,H,22,3,"div",39),t(35,"button",40),p("click",function(){d(e);let i=s();return m(i.agregarItem())}),t(36,"i",1),r(37,"add_circle"),n(),r(38," Agregar \xCDtem "),n()()(),t(39,"div",41)(40,"button",42),p("click",function(){d(e);let i=s();return m(i.cerrarFormulario())}),r(41,"Cancelar"),n(),t(42,"button",43),p("click",function(){d(e);let i=s();return m(i.guardarMenu())}),r(43,"Guardar"),n()()()()}if(l&2){let e=s();a(4),g(e.editando?"Editar Men\xFA":"Crear Nuevo Men\xFA"),a(8),f("ngModel",e.menuActual.nombre),a(4),f("ngModel",e.menuActual.descripcion),a(4),f("ngModel",e.menuActual.tipo),a(10),f("ngModel",e.menuActual.precio),a(4),_("ngForOf",e.menuActual.items)}}var ne=(()=>{class l{constructor(e){this.menuService=e,this.activeTab="fijos",this.menusFijos=[],this.menusDiarios=[],this.formularioVisible=!1,this.editando=!1,this.menuActual=this.inicializarMenu()}ngOnInit(){this.cargarMenus()}cargarMenus(){this.menuService.getAllMenus().subscribe({next:e=>{this.menusFijos=e.filter(c=>c.tipo!=="diario"),this.menusDiarios=e.filter(c=>c.tipo==="diario")},error:e=>{console.error("Error al cargar los men\xFAs:",e),alert("No se pudieron cargar los men\xFAs. Por favor, intenta nuevamente.")}})}mostrarFormularioCreacion(){this.editando=!1,this.menuActual=this.inicializarMenu(),this.formularioVisible=!0}editarMenu(e){this.editando=!0,this.menuActual=JSON.parse(JSON.stringify(e)),this.formularioVisible=!0}cerrarFormulario(){this.formularioVisible=!1}agregarItem(){this.menuActual.items.push({nombre:"",descripcion:"",categoria:"entrada"})}eliminarItem(e){this.menuActual.items.splice(e,1)}guardarMenu(){if(!this.menuActual.nombre||!this.menuActual.descripcion||!this.menuActual.tipo||this.menuActual.precio<=0){alert("Por favor, completa todos los campos requeridos del men\xFA.");return}if(this.menuActual.items.length===0){alert("El men\xFA debe tener al menos un \xEDtem.");return}for(let e of this.menuActual.items)if(!e.nombre||!e.descripcion){alert("Todos los \xEDtems deben tener nombre y descripci\xF3n.");return}this.editando&&this.menuActual.id?this.menuService.updateMenu(this.menuActual.id,this.menuActual).subscribe({next:()=>{this.cerrarFormulario(),this.cargarMenus()},error:e=>{console.error("Error al actualizar el men\xFA:",e),alert("No se pudo actualizar el men\xFA. Por favor, intenta nuevamente.")}}):this.menuService.createMenu(this.menuActual).subscribe({next:()=>{this.cerrarFormulario(),this.cargarMenus()},error:e=>{console.error("Error al crear el men\xFA:",e),alert("No se pudo crear el men\xFA. Por favor, intenta nuevamente.")}})}desactivarMenu(e){e&&confirm("\xBFEst\xE1s seguro de que deseas desactivar este men\xFA?")&&this.menuService.deactivateMenu(e).subscribe({next:()=>{this.cargarMenus()},error:c=>{console.error("Error al desactivar el men\xFA:",c),alert("No se pudo desactivar el men\xFA. Por favor, intenta nuevamente.")}})}inicializarMenu(){return{nombre:"",descripcion:"",tipo:"diario",precio:0,items:[]}}static{this.\u0275fac=function(c){return new(c||l)(S(q))}}static{this.\u0275cmp=P({type:l,selectors:[["app-menu-gestion"]],standalone:!0,features:[w],decls:18,vars:7,consts:[[1,"container"],[1,"material-icons"],[1,"menu-tabs"],[1,"tab-btn",3,"click"],["class","menu-section",4,"ngIf"],[1,"botones-accion"],[1,"btn-crear",3,"click"],["class","modal",4,"ngIf"],[1,"menu-section"],[1,"menu-list"],["class","menu-card",4,"ngFor","ngForOf"],[1,"menu-card"],[1,"menu-card-header"],[1,"menu-tipo"],[1,"menu-descripcion"],[1,"menu-precio"],[1,"menu-items"],[4,"ngFor","ngForOf"],[1,"menu-actions"],[1,"action-btn","edit",3,"click"],[1,"action-btn","delete",3,"click"],[1,"modal"],[1,"modal-content"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","placeholder","Nombre del men\xFA","required","",3,"ngModelChange","ngModel"],["for","descripcion"],["id","descripcion","placeholder","Descripci\xF3n del men\xFA","required","",3,"ngModelChange","ngModel"],["for","tipo"],["id","tipo","required","",3,"ngModelChange","ngModel"],["value","diario"],["value","ejecutivo"],["value","especial"],["for","precio"],["type","number","id","precio","min","0","step","0.01","placeholder","0.00","required","",3,"ngModelChange","ngModel"],[1,"items-container"],["class","item-form",4,"ngFor","ngForOf"],[1,"btn-add-item",3,"click"],[1,"modal-footer"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click"],[1,"item-form"],["type","text","placeholder","Nombre del \xEDtem","required","",3,"ngModelChange","ngModel"],["type","text","placeholder","Descripci\xF3n del \xEDtem","required","",3,"ngModelChange","ngModel"],["required","",3,"ngModelChange","ngModel"],["value","entrada"],["value","plato principal"],["value","postre"],[1,"btn-remove-item",3,"click"]],template:function(c,i){c&1&&(t(0,"div",0)(1,"h2")(2,"i",1),r(3,"edit"),n(),r(4," Gesti\xF3n de Men\xFAs"),n(),t(5,"div",2)(6,"button",3),p("click",function(){return i.activeTab="fijos"}),r(7,"Men\xFAs Fijos"),n(),t(8,"button",3),p("click",function(){return i.activeTab="diarios"}),r(9,"Men\xFAs del D\xEDa"),n()(),x(10,Y,5,1,"div",4)(11,Q,5,1,"div",4),t(12,"div",5)(13,"button",6),p("click",function(){return i.mostrarFormularioCreacion()}),t(14,"i",1),r(15,"add"),n(),r(16," Crear Nuevo Men\xFA "),n()(),x(17,K,44,6,"div",7),n()),c&2&&(a(6),C("active",i.activeTab==="fijos"),a(2),C("active",i.activeTab==="diarios"),a(2),_("ngIf",i.activeTab==="fijos"),a(),_("ngIf",i.activeTab==="diarios"),a(6),_("ngIf",i.formularioVisible))},dependencies:[k,O,E,N,I,D,V,T,G,A,j,W,F,z],styles:['.container[_ngcontent-%COMP%]{padding:0;max-width:1200px;margin:0 auto}h2[_ngcontent-%COMP%]{color:var(--primary-color);margin-bottom:25px;font-size:1.8rem;display:flex;align-items:center;gap:10px}h2[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:2rem}.menu-tabs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-bottom:30px;flex-wrap:wrap}.tab-btn[_ngcontent-%COMP%]{background:transparent;color:#fff;border:2px solid var(--primary-color);padding:10px 20px;border-radius:50px;cursor:pointer;transition:all .3s ease;font-family:Quicksand,sans-serif;font-weight:600;font-size:1rem}.tab-btn.active[_ngcontent-%COMP%], .tab-btn[_ngcontent-%COMP%]:hover{background:var(--primary-color);color:var(--background-dark);box-shadow:0 0 10px #ffcc2980}.menu-section[_ngcontent-%COMP%]{margin-bottom:30px;animation:_ngcontent-%COMP%_fadeIn .5s ease}h3[_ngcontent-%COMP%]{color:var(--primary-color);margin-bottom:20px;font-size:1.5rem;display:flex;align-items:center;gap:8px;border-bottom:2px solid var(--primary-color);padding-bottom:8px;width:fit-content}.menu-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:25px}.menu-card[_ngcontent-%COMP%]{background:var(--background-medium);border-radius:15px;padding:20px;box-shadow:0 8px 20px #00000026;border:2px solid var(--primary-color);transition:all .3s ease}.menu-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 12px 25px #0003,0 0 15px var(--primary-color)}.menu-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.menu-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--primary-color);margin:0;font-size:1.3rem}.menu-tipo[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--background-dark);padding:4px 10px;border-radius:20px;font-size:.8rem;font-weight:700}.menu-descripcion[_ngcontent-%COMP%]{margin-bottom:15px;color:#ddd}.menu-precio[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:700;font-size:1.2rem;margin-bottom:15px}.menu-items[_ngcontent-%COMP%]{margin-bottom:20px}.menu-items[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:var(--primary-color);margin-bottom:10px}.menu-items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:10px}.menu-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;padding-left:20px;position:relative}.menu-items[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";color:var(--primary-color);position:absolute;left:0;font-size:1.5rem}.menu-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.action-btn[_ngcontent-%COMP%]{padding:8px 15px;border-radius:5px;display:flex;align-items:center;gap:5px;cursor:pointer;font-weight:700;transition:all .3s ease;border:none}.action-btn.edit[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.action-btn.delete[_ngcontent-%COMP%]{background:#f44336;color:#fff}.action-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 0 10px #0000004d}.botones-accion[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:30px}.btn-crear[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--background-dark);border:none;padding:12px 20px;border-radius:50px;font-weight:700;display:flex;align-items:center;gap:8px;font-size:1.1rem;cursor:pointer;transition:all .3s ease}.btn-crear[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 0 15px #ffcc2999}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:var(--background-medium);border-radius:15px;width:90%;max-width:800px;max-height:90vh;overflow-y:auto;border:2px solid var(--primary-color)}.modal-header[_ngcontent-%COMP%]{padding:15px 20px;border-bottom:1px solid var(--primary-color);display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--primary-color);border-bottom:none}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;cursor:pointer;font-size:1.5rem}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{padding:15px 20px;border-top:1px solid var(--primary-color);display:flex;justify-content:flex-end;gap:10px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;color:var(--primary-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:5px;background:#ffffff1a;border:1px solid rgba(255,204,41,.3);color:#fff}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.items-container[_ngcontent-%COMP%]{margin-top:20px;border:1px solid rgba(255,204,41,.3);border-radius:10px;padding:15px}.item-form[_ngcontent-%COMP%]{padding:15px;margin-bottom:15px;border:1px dashed rgba(255,204,41,.3);border-radius:8px;position:relative}.btn-remove-item[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:transparent;border:none;color:#f44336;cursor:pointer}.btn-add-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;background:transparent;color:var(--primary-color);border:1px dashed var(--primary-color);padding:10px 15px;border-radius:8px;cursor:pointer;transition:all .3s ease;width:100%;justify-content:center}.btn-add-item[_ngcontent-%COMP%]:hover{background:#ffcc291a}.btn-cancel[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:10px 20px;border-radius:5px;font-weight:700;cursor:pointer;transition:all .3s ease}.btn-cancel[_ngcontent-%COMP%]{background:transparent;color:#fff;border:1px solid #ddd}.btn-save[_ngcontent-%COMP%]{background:var(--primary-color);color:var(--background-dark);border:none}.btn-save[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 0 10px #ffcc2980}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.menu-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}}return l})();export{ne as MenuGestionComponent};
